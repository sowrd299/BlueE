<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http
://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
		<title lang="en">Highslide Attachment Mod</title>
		<description lang="en">Makes attached images open in a nice popup layer. Large images fits screen (resized) with option to view fullsize.
		With Gallery and lots of config options in the JS file.</description>

		<author-notes lang="en">
Developed from the old Highslide 1.0.7 mod
		</author-notes>
		<author-group>
			<author>
				<realname>Stoker</realname>
				<username>Stokerpiller</username>
				<homepage>http://www.phpbb3bcodes.com</homepage>
			</author>
		</author-group>

		<mod-version>4.1.15</mod-version>

		<installation>
			<level>easy</level>
			<time>180</time>
			<target-version>3.0.9</target-version>
		</installation>	

		<history>
			<entry>
				<date>2008-12-15</date>
				<rev-version>4.0.10</rev-version>
				<changelog lang="en">
					<change>Released at my mainsite. This replaces the old Highslide Attachment Mod 1.0.7</change>
				</changelog>       
			</entry>
			<entry>
				<date>2009-03-01</date>
				<rev-version>4.0.12</rev-version>
				<changelog lang="en">
					<change>Script updated to latest version, only script and css changes</change>
				</changelog>       
			</entry>
			<entry>
				<date>2009-05-03</date>
				<rev-version>4.1.4</rev-version>
				<changelog lang="en">
					<change>Script updated to latest version, only script and css changes</change>
				</changelog>       
			</entry>
			<entry>
				<date>2009-06-20</date>
				<rev-version>4.1.4b</rev-version>
				<changelog lang="en">
					<change>Subsilver2 path errors fixed</change>
				</changelog>       
			</entry>
			<entry>
				<date>2010-01-22</date>
				<rev-version>4.1.8</rev-version>
				<changelog lang="en">
					<change>Simplified installation. Using latest script from highslide.com</change>
				</changelog>       
			</entry>
			<entry>
				<date>2011-05-16</date>
				<rev-version>4.1.12</rev-version>
				<changelog lang="en">
					<change>Updated, simplified installation and made Automod compatible</change>
				</changelog>       
			</entry>
			<entry>
				<date>2011-08-01</date>
				<rev-version>4.1.13</rev-version>
				<changelog lang="en">
					<change>Added DIY instructions for creation of thumbnail. Thanks 4-seven, added grouping of images per post. Validation changes.</change>
				</changelog>       
			</entry>
			<entry>
				<date>2011-09-14</date>
				<rev-version>4.1.14</rev-version>
				<changelog lang="en">
					<change>Fix validation error</change>
				</changelog>       
			</entry>
			<entry>
				<date>2011-09-14</date>
				<rev-version>4.1.15</rev-version>
				<changelog lang="en">
					<change>Fix validation error</change>
				</changelog>       
			</entry>
		</history>
		
	</header>
	<action-group>
		<open src="styles/prosilver/template/overall_header.html">
			<edit>
			<comment lang="en">Lets add the js and styling.</comment>
				<find><![CDATA[<script type="text/javascript" src="{T_SUPER_TEMPLATE_PATH}/forum_fn.js"></script>]]></find>
				<action type="after-add"><![CDATA[<script type="text/javascript" src="{ROOT_PATH}highslide/highslide-full.js"></script>
<link href="{ROOT_PATH}highslide/highslide.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
// ]]>&lt;![CDATA[<![CDATA[
hs.graphicsDir = '{ROOT_PATH}highslide/graphics/';
hs.align = 'center';
hs.transitions = ['expand', 'crossfade'];
hs.outlineType = 'rounded-white';
hs.fadeInOut = true;
//hs.dimmingOpacity = 0.75;

// Add the controlbar
hs.addSlideshow({
	//slideshowGroup: 'group1',
	interval: 5000,
	repeat: false,
	useControls: true,
	fixedControls: 'fit',
	overlayOptions: {
		opacity: 0.75,
		position: 'bottom center',
		hideOnMouseOut: true
	}
});
// ]]>]]&gt;<![CDATA[
</script>]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/attachment.html">
			<edit>
			<comment lang="en">Lets add the js and styling.</comment>
				<find><![CDATA[			<dt><a href="{_file.U_DOWNLOAD_LINK}"><img src="{_file.THUMB_IMAGE}" alt="{_file.DOWNLOAD_NAME}" title="{_file.DOWNLOAD_NAME} ({_file.FILESIZE} {_file.SIZE_LANG}) {_file.L_DOWNLOAD_COUNT}" /></a></dt>]]></find>
				<action type="replace-with"><![CDATA[			<dd class="highslide-gallery"><a href="{_file.U_DOWNLOAD_LINK}/{_file.DOWNLOAD_NAME}" class="highslide" onclick="return hs.expand(this, { slideshowGroup: '{_file.THUMB_POST_ID}' })"><img src="{_file.THUMB_IMAGE}" alt="{_file.DOWNLOAD_NAME}" title="{_file.DOWNLOAD_NAME} ({_file.FILESIZE} {_file.SIZE_LANG}) {_file.L_DOWNLOAD_COUNT}" /></a><div class="highslide-caption">{_file.DOWNLOAD_NAME} ({_file.FILESIZE} {_file.SIZE_LANG}) {_file.L_DOWNLOAD_COUNT}</div></dd>]]></action>
			</edit>
		</open>
		<open src="includes/functions_content.php">
			<edit>
				<find><![CDATA[						'THUMB_IMAGE'		=> $thumbnail_link,]]></find>
				<action type="after-add"><![CDATA[						'THUMB_POST_ID'      => $attachment['post_msg_id'],]]></action>
			</edit>
		</open>
				<diy-instructions lang="en">Save and upload the changed files.
Go to ACP and refresh template.

Go here and download the script folder: http://highslide.com/download.php
Unzip and upload the highslide folder to the root of your forum.
				
Make sure to create thumbnails! Else the mod wont work.
Go to ACP -> General -> Attachment settings
Scroll down to: Image category settings [Assigned extension group: Images]
Make sure that Create thumbnail are set to Yes and Maximum thumbnail width in pixel is set to 250px (Just a suggestion. You can set the width as you want)</diy-instructions>
	</action-group>
</mod>
